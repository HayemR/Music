const lagu = [
  [
    "Para Eidos",
    "Dimension 32",
    2000,
    7900,
    "png/para.png",
    "png/piringan.png",
    "https://open.spotify.com/track/1YvtXZo6ZeqtgnAwZuQYUL?si=1bbe8fc47c054dad",
  ],
  [
    "Color Your Night",
    "Persona 3 Reload",
    7078,
    14080,
    "png/persona.png",
    "png/piringan.png",
    "https://open.spotify.com/track/4pjFNyjGaoKgLTnndISP6V?si=672915338cad41a7",
  ],
  [
    "Bunny Girl",
    "AKASAKI",
    1000,
    12800,
    "png/bunny.png",
    "png/piringan.png",
    "https://open.spotify.com/track/5skCbGGAnc7Ns18Figz54h?si=77b91f6b7ed84b55",
  ],
  [
    "Mi Terre CLN",
    "Fuerza Regide",
    1000,
    9000,
    "png/miterre.png",
    "png/piringan.png",
    "https://open.spotify.com/track/0MHFbqdlWzAkgO8p7pkfMb?si=e8f15d2325e84de3",
  ],
  [
    "Smile",
    "Lili Allen",
    1000,
    16000,
    "png/smile.png",
    "png/piringan.png",
    "https://open.spotify.com/track/79z9QkhHePTFsSeVw9uyj0?si=7a79261c4c0d48b9",
  ],
  [
    "Sunflower",
    "Rex Orange County",
    2500,
    12500,
    "png/sunflower.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7h2nmmoWDi2UpfYKLKWLYB?si=a8a67375276c4871",
  ],
  [
    "As It Was",
    "Harry Styles",
    5000,
    30000,
    "png/as_it_was.png",
    "png/piringan.png",
    "https://open.spotify.com/track/4LRPiXqCikLlN15c3yImP7?si=1c0db97398d6486c",
  ],
  [
    "Blinding Lights",
    "The Weeknd",
    8000,
    45000,
    "png/blinding_lights.png",
    "png/piringan.png",
    "https://open.spotify.com/track/0VjIjW4GlUZAMYd2vXMi3b?si=6943f858b5b34d90",
  ],
  [
    "夜に駆ける",
    "YOASOBI",
    6200,
    32000,
    "png/yorunikakeru.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7GhIk7Il098yCjg4BQjzvb?si=f64f6c7633c54838",
  ],
];
const lagu_req = [
  /* request mb naya*/
  [
    "a little piece <br> of heaven",
    "Avenged Sevenfold",
    1000,
    20000,
    "png/avenged.png",
    "png/piringan.png",
    "https://open.spotify.com/track/1BLfQ6dPXmuDrFmbdfW7Jl?si=0f1a2b3c4d5e6f7g",
  ],
  [
    "dear god",
    "Avenged Sevenfold",
    1000,
    20000,
    "png/avenged.png",
    "png/piringan.png",
    "https://open.spotify.com/track/2FML7gk7ac6quGFIjvkDb3?si=0f1a2b3c4d5e6f7g",
  ],
  [
    "afterlife",
    "Avenged Sevenfold",
    1000,
    20000,
    "png/avenged.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7zAt4tdL44D3VuzsvM0N8n?si=0f1a2b3c4d5e6f7g",
  ],
  [
    "Gunslinger",
    "Avenged Sevenfold",
    1000,
    20000,
    "png/avenged.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7MOQrtXMNImAq5TrPZzC0w?si=2fb179d812a04964",
  ],
  [
    "Seize the day",
    "Avenged Sevenfold",
    1000,
    20000,
    "png/avenged2.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7HKRWMTErKh56EIBeFcmdf?si=0a03e3fd0719476d",
  ],
  [
    "Snuff,",
    "Slipknot",
    1000,
    20000,
    "png/slipknot1.png",
    "png/piringan.png",
    "https://open.spotify.com/track/3RptaQ5Xb8WvtpItZ2f9Hi?si=894ed0c645f74b46",
  ],
  [
    "Psychosocial",
    "Slipknot",
    1000,
    20000,
    "png/slipknot2.png",
    "png/piringan.png",
    "https://open.spotify.com/track/3RAFcUBrCNaboRXoP3S5t1?si=2012d99ecd2248a1  ",
  ],
  [
    "Eyeless",
    "Slipknot",
    1000,
    20000,
    "png/slipknot3.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7MEHTWzEi3z7P2jEWAcdHZ?si=5675dc9787ce4016",
  ],
  [
    "Cancer",
    "My Chemical Romance",
    1000,
    20000,
    "png/mcr1.png",
    "png/piringan.png",
    "https://open.spotify.com/track/0GgN4MhR5GKn5IcKN0e0rG?si=ee36237e44eb432f",
  ],
  [
    "Helena",
    "My Chemical Romance",
    1000,
    20000,
    "png/mcr2.png",
    "png/piringan.png",
    "https://open.spotify.com/track/5dTHtzHFPyi8TlTtzoz1J9?si=3b1a8dac1a234f6e",
  ],
  [
    "Given Up",
    "Linkin Park",
    1000,
    20000,
    "png/lp1.png",
    "png/piringan.png",
    "https://open.spotify.com/track/1fLlRApgzxWweF1JTf8yM5?si=f68c9797109741bc",
  ],
  [
    "King slayer",
    "Bring Me The Horizon",
    1000,
    20000,
    "png/bmth.png",
    "png/piringan.png",
    "https://open.spotify.com/track/7CAbF0By0Fpnbiu6Xn5ZF7?si=cc1be40b40f04818",
  ],
];
const konten = document.getElementById("container");
const konten2 = document.getElementById("container2");

for (let i = 0; i < lagu.length; i++) {
  const card = `
<a href="${lagu[i][6]}" target="blank"
    ><div class="card" style="background-image: url(${lagu[i][4]})">
  <h2>${lagu[i][0]}</h2>
    <p>Oleh ${lagu[i][1]}</p>
    <img src="${lagu[i][5]}" />
    <div class="foot">
          <div class="kiri" data-index="${i}">
            <i class="ph ph-thumbs-up"></i>
            <span class="like-count">${lagu[i][2]}</span>
          </div>
          <div class="kanan" data-index="${i}"><i class="ph ph-eye"></i>
          <span class-"view-count">${lagu[i][3]}</span></div>
        </div>
</div></a>
  `;
  konten.innerHTML += card;
}

for (let i = 0; i < lagu_req.length; i++) {
  const card = `
  <a href="${lagu_req[i][6]}" target="blank">
    <div class="card" style="background-image: url(${lagu_req[i][4]})">
      <h2>${lagu_req[i][0]}</h2>
      <p>Oleh ${lagu_req[i][1]}</p>
      <img src="${lagu_req[i][5]}" />
      <div class="foot">
        <div class="kiri" data-index="req-${i}">
          <i class="ph ph-thumbs-up"></i>
          <span class="like-count">${lagu_req[i][2]}</span>
        </div>
        <div class="kanan" data-index="req-${i}">
          <i class="ph ph-eye"></i>
          <span class="view-count">${lagu_req[i][3]}</span>
        </div>
      </div>
    </div>
  </a>
  `;
  konten2.innerHTML += card;
}

document.querySelectorAll(".kiri").forEach((likeDiv) => {
  const index = likeDiv.getAttribute("data-index");
  const countSpan = likeDiv.querySelector(".like-count");

  const storedLikes = localStorage.getItem(`like-${index}`);
  if (storedLikes) {
    countSpan.textContent = storedLikes;
  }

  likeDiv.addEventListener("click", function (e) {
    e.preventDefault();
    e.stopPropagation();

    const liked = localStorage.getItem(`liked-${index}`);
    if (liked === "true") return;

    let count = parseInt(countSpan.textContent);
    count += 1;
    countSpan.textContent = count;

    localStorage.setItem(`like-${index}`, count);
    localStorage.setItem(`liked-${index}`, "true");

    likeDiv.classList.add("liked");
  });
});
